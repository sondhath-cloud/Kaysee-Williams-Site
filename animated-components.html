<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Components and Backgrounds - Kaysee Williams</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #1a1a1a;
            color: white;
            padding: 40px 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #FF1493, #FF8C00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            font-size: 1.2em;
            color: #aaa;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(255, 20, 147, 0.2);
            border: 2px solid #FF1493;
            border-radius: 10px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(255, 20, 147, 0.4);
            transform: translateX(-5px);
        }
        
        .section {
            margin-bottom: 80px;
        }
        
        .section-title {
            font-size: 2em;
            margin-bottom: 30px;
            text-align: center;
            color: #FF8C00;
        }
        
        .backgrounds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .background-demo {
            height: 300px;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .background-label {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            font-size: 1.1em;
            font-weight: bold;
        }
        
        /* Animated Background 1: Flowing Gradient */
        .bg-flowing {
            background: linear-gradient(135deg, #FF1493, #FF8C00, #FF1493);
            background-size: 400% 400%;
            animation: flowingGradient 8s ease infinite;
        }
        
        @keyframes flowingGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Animated Background 2: Pulsing Gradient */
        .bg-pulsing {
            background: radial-gradient(circle at center, #FF1493, #FF8C00);
            animation: pulsingGradient 4s ease-in-out infinite;
        }
        
        @keyframes pulsingGradient {
            0%, 100% { 
                background: radial-gradient(circle at center, #FF1493, #FF8C00);
            }
            50% { 
                background: radial-gradient(circle at center, #FF8C00, #FF1493);
            }
        }
        
        /* Animated Background 3: Rotating Gradient */
        .bg-rotating {
            background: linear-gradient(45deg, #FF1493, #FF8C00);
            animation: rotatingGradient 6s linear infinite;
        }
        
        @keyframes rotatingGradient {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        /* Animated Background 4: Wave Effect */
        .bg-wave {
            background: linear-gradient(135deg, #FF1493 0%, #FF8C00 50%, #FF1493 100%);
            background-size: 200% 200%;
            animation: waveEffect 10s ease infinite;
        }
        
        @keyframes waveEffect {
            0% { background-position: 0% 0%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }
        
        /* Animated Background 5: Diagonal Sweep */
        .bg-diagonal {
            background: linear-gradient(45deg, 
                #FF1493 0%, 
                #FF8C00 25%, 
                #FF1493 50%, 
                #FF8C00 75%, 
                #FF1493 100%);
            background-size: 400% 400%;
            animation: diagonalSweep 7s linear infinite;
        }
        
        @keyframes diagonalSweep {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }
        
        /* Animated Background 6: Radial Pulse */
        .bg-radial-pulse {
            background: radial-gradient(circle at 50% 50%, 
                #FF1493 0%, 
                #FF8C00 50%, 
                #FF1493 100%);
            background-size: 200% 200%;
            animation: radialPulse 5s ease-in-out infinite;
        }
        
        @keyframes radialPulse {
            0%, 100% { 
                background-size: 200% 200%;
                opacity: 1;
            }
            50% { 
                background-size: 250% 250%;
                opacity: 0.8;
            }
        }
        
        /* Animated Background 7: Color Shift */
        .bg-color-shift {
            background: linear-gradient(135deg, #FF1493, #FF8C00);
            animation: colorShift 6s ease-in-out infinite alternate;
        }
        
        @keyframes colorShift {
            0% { 
                background: linear-gradient(135deg, #FF1493, #FF8C00);
            }
            100% { 
                background: linear-gradient(135deg, #FF8C00, #FF1493, #FF8C00);
            }
        }
        
        /* Animated Background 8: Shimmer Effect */
        .bg-shimmer {
            background: linear-gradient(135deg, 
                #FF1493 0%, 
                #FF8C00 25%, 
                rgba(255, 255, 255, 0.3) 50%, 
                #FF8C00 75%, 
                #FF1493 100%);
            background-size: 300% 300%;
            animation: shimmer 8s ease infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Animated Background 9: Breathing Effect */
        .bg-breathing {
            background: radial-gradient(ellipse at center, 
                #FF1493 0%, 
                #FF8C00 60%, 
                #1a1a1a 100%);
            animation: breathing 5s ease-in-out infinite;
        }
        
        @keyframes breathing {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
            }
            50% { 
                transform: scale(1.1);
                opacity: 0.9;
            }
        }
        
        /* Floating Shapes Styles */
        .shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(5px);
            pointer-events: none;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .shape-circle-1 {
            width: 120px;
            height: 120px;
            top: 20%;
            left: -120px;
            animation: glideRight 12s ease-in-out infinite;
        }
        
        .shape-circle-2 {
            width: 80px;
            height: 80px;
            top: 60%;
            left: -80px;
            animation: glideRight 15s ease-in-out infinite 2s;
        }
        
        .shape-circle-3 {
            width: 140px;
            height: 140px;
            top: 40%;
            left: -140px;
            animation: glideRight 18s ease-in-out infinite 4s;
        }
        
        .shape-square-1 {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            top: 15%;
            right: -60px;
            animation: glideLeft 14s ease-in-out infinite;
        }
        
        .shape-square-2 {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            top: 70%;
            right: -40px;
            animation: glideLeft 16s ease-in-out infinite 3s;
        }
        
        .shape-diagonal-1 {
            width: 70px;
            height: 70px;
            top: -70px;
            left: 10%;
            animation: glideDiagonal 20s ease-in-out infinite;
        }
        
        .shape-diagonal-2 {
            width: 55px;
            height: 55px;
            top: -55px;
            left: 60%;
            animation: glideDiagonal 17s ease-in-out infinite 5s;
        }
        
        .shape-float-1 {
            width: 90px;
            height: 90px;
            top: 10%;
            left: 10%;
            animation: floatAround 25s ease-in-out infinite;
        }
        
        .shape-float-2 {
            width: 65px;
            height: 65px;
            top: 50%;
            left: 50%;
            animation: floatAround 20s ease-in-out infinite 3s;
            animation-direction: reverse;
        }
        
        @keyframes glideRight {
            0% {
                left: -100px;
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            50% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                left: calc(100% + 100px);
                opacity: 0;
            }
        }
        
        @keyframes glideLeft {
            0% {
                right: -100px;
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            50% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                right: calc(100% + 100px);
                opacity: 0;
            }
        }
        
        @keyframes glideDiagonal {
            0% {
                top: -100px;
                left: 10%;
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            50% {
                opacity: 0.7;
                left: 60%;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                top: calc(100% + 100px);
                left: 90%;
                opacity: 0;
            }
        }
        
        @keyframes floatAround {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0.7;
            }
            25% {
                transform: translate(100px, -50px) rotate(90deg);
                opacity: 0.8;
            }
            50% {
                transform: translate(150px, 50px) rotate(180deg);
                opacity: 0.7;
            }
            75% {
                transform: translate(50px, 100px) rotate(270deg);
                opacity: 0.8;
            }
        }
        
        /* WebGL Flowers Container */
        .webgl-container {
            position: relative;
            height: 600px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            background: linear-gradient(135deg, #FF1493, #FF8C00);
        }
        
        .webgl-container canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .webgl-clean-btn {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 10;
            font-size: 15px;
            color: white;
            text-shadow: 0 0 10px #000000;
            user-select: none;
            padding: 10px 20px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }
        
        .webgl-clean-btn:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }
        
        .webgl-instruction {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            font-size: 2em;
            text-shadow: 0 0 10px #000000;
            user-select: none;
            pointer-events: none;
            opacity: 0.8;
        }
        
        .interactive-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Liquid Effect Container */
        .liquid-container {
            position: relative;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            background: #000;
            cursor: pointer;
        }
        
        .liquid-container canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .liquid-text {
            font-size: 4.5em;
            font-weight: bold;
            text-align: center;
            position: relative;
            z-index: 10;
            color: white;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
            animation: textGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes textGlow {
            0% { 
                text-shadow: 0 0 30px rgba(255, 255, 255, 0.8),
                           0 0 60px rgba(255, 255, 255, 0.4);
            }
            100% { 
                text-shadow: 0 0 40px rgba(255, 255, 255, 0.9),
                           0 0 80px rgba(255, 255, 255, 0.5);
            }
        }
        
        .liquid-wave {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            animation: waveFlow 6s ease-in-out infinite;
        }
        
        @keyframes waveFlow {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                opacity: 0.7;
            }
            25% {
                transform: scale(1.1) rotate(1deg);
                opacity: 0.8;
            }
            50% {
                transform: scale(0.9) rotate(-1deg);
                opacity: 0.6;
            }
            75% {
                transform: scale(1.05) rotate(0.5deg);
                opacity: 0.75;
            }
        }
        
        .liquid-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: blobMorph 12s ease-in-out infinite;
        }
        
        .liquid-blob:nth-child(1) {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
            top: 10%;
            left: 10%;
            animation-duration: 10s;
            animation-delay: 0s;
        }
        
        .liquid-blob:nth-child(2) {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent);
            bottom: 10%;
            right: 10%;
            animation-duration: 14s;
            animation-delay: -3s;
        }
        
        .liquid-blob:nth-child(3) {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.25), transparent);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-duration: 12s;
            animation-delay: -6s;
        }
        
        @keyframes blobMorph {
            0%, 100% {
                transform: translate(0, 0) scale(1);
                border-radius: 50% 30% 70% 40%;
            }
            25% {
                transform: translate(60px, -40px) scale(1.3);
                border-radius: 30% 70% 50% 60%;
            }
            50% {
                transform: translate(-50px, 50px) scale(0.8);
                border-radius: 70% 40% 30% 50%;
            }
            75% {
                transform: translate(80px, 30px) scale(1.1);
                border-radius: 40% 50% 60% 30%;
            }
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.4), transparent);
            transform: scale(0);
            animation: rippleEffect 1s ease-out;
            pointer-events: none;
        }
        
        @keyframes rippleEffect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">Back to Main Menu</a>
    
    <div class="header">
        <h1>Animated Components and Backgrounds</h1>
        <p>Explore animated gradient backgrounds using your brand colors</p>
    </div>
    
    <div class="section">
        <h2 class="section-title">Animated Gradient Backgrounds</h2>
        <div class="backgrounds-grid">
            <div class="background-demo bg-flowing">
                <div class="shape shape-circle-1"></div>
                <div class="shape shape-circle-2"></div>
                <div class="shape shape-circle-3"></div>
                <div class="background-label">Flowing Gradient with Gliding Circles</div>
            </div>
            
            <div class="background-demo bg-pulsing">
                <div class="background-label">Pulsing Gradient</div>
            </div>
            
            <div class="background-demo bg-rotating">
                <div class="background-label">Rotating Gradient</div>
            </div>
            
            <div class="background-demo bg-wave">
                <div class="shape shape-square-1"></div>
                <div class="shape shape-square-2"></div>
                <div class="background-label">Wave Effect with Gliding Squares</div>
            </div>
            
            <div class="background-demo bg-diagonal">
                <div class="shape shape-diagonal-1"></div>
                <div class="shape shape-diagonal-2"></div>
                <div class="background-label">Diagonal Sweep with Falling Circles</div>
            </div>
            
            <div class="background-demo bg-radial-pulse">
                <div class="background-label">Radial Pulse</div>
            </div>
            
            <div class="background-demo bg-color-shift">
                <div class="background-label">Color Shift</div>
            </div>
            
            <div class="background-demo bg-shimmer">
                <div class="shape shape-float-1"></div>
                <div class="shape shape-float-2"></div>
                <div class="background-label">Shimmer Effect with Floating Shapes</div>
            </div>
            
            <div class="background-demo bg-breathing">
                <div class="background-label">Breathing Effect</div>
            </div>
        </div>
    </div>
    
    <div class="section">
        <h2 class="section-title">Interactive Components</h2>
        <div class="interactive-grid">
            <div class="liquid-container" id="liquidContainer">
                <canvas id="liquid-canvas"></canvas>
                <div class="liquid-text">Kaysee Williams</div>
            </div>
            
            <div class="webgl-container">
                <canvas id="webgl-canvas"></canvas>
                <div class="webgl-instruction">Click to Add Flowers</div>
                <div class="webgl-clean-btn">Clear Canvas</div>
            </div>
        </div>
    </div>

<script type="x-shader/x-fragment" id="fragmentShader">
    #define PI 3.14159265359

    uniform float u_ratio;
    uniform vec2 u_cursor;
    uniform float u_stop_time;
    uniform float u_clean;
    uniform vec2 u_stop_randomizer;

    uniform sampler2D u_texture;
    varying vec2 vUv;

    // --------------------------------
    // 2D noise

    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }
    float snoise(vec2 v) {
        const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);
        vec2 i = floor(v + dot(v, C.yy));
        vec2 x0 = v - i + dot(i, C.xx);
        vec2 i1;
        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
        vec4 x12 = x0.xyxy + C.xxzz;
        x12.xy -= i1;
        i = mod289(i);
        vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));
        vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);
        m = m*m;
        m = m*m;
        vec3 x = 2.0 * fract(p * C.www) - 1.0;
        vec3 h = abs(x) - 0.5;
        vec3 ox = floor(x + 0.5);
        vec3 a0 = x - ox;
        m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);
        vec3 g;
        g.x = a0.x * x0.x + h.x * x0.y;
        g.yz = a0.yz * x12.xz + h.yz * x12.yw;
        return 130.0 * dot(m, g);
    }


    float get_flower_shape(vec2 _p, float _pet_n, float _angle, float _outline) {
        _angle *= 3.;

        _p = vec2(_p.x * cos(_angle) - _p.y * sin(_angle),
        _p.x * sin(_angle) + _p.y * cos(_angle));

        float a = atan(_p.y, _p.x);

        float flower_sectoral_shape = pow(abs(sin(a * _pet_n)), .4) + .25;

        vec2 flower_size_range = vec2(.03, .1);
        float size = flower_size_range[0] + u_stop_randomizer[0] * flower_size_range[1];

        float flower_radial_shape = pow(length(_p) / size, 2.);
        flower_radial_shape -= .1 * sin(8. * a); // add noise
        flower_radial_shape = max(.1, flower_radial_shape);
        flower_radial_shape += smoothstep(0., 0.03, -_p.y + .2 * abs(_p.x));

        float grow_time = step(.25, u_stop_time) * pow(u_stop_time, .3);
        float flower_shape = 1. - smoothstep(0., flower_sectoral_shape, _outline * flower_radial_shape / grow_time);

        flower_shape *= (1. - step(1., grow_time));

        return flower_shape;
    }

    float get_stem_shape(vec2 _p, vec2 _uv, float _w, float _angle) {

		  _w = max(.004, _w);
		 
        float x_offset = _p.y * sin(_angle);
        x_offset *= pow(3. * _uv.y, 2.);
        _p.x -= x_offset;

        // add horizontal noise to the cursor coordinale
        float noise_power = .5;
        float cursor_horizontal_noise = noise_power * snoise(2. * _uv * u_stop_randomizer[0]);
        cursor_horizontal_noise *= pow(dot(_p.y, _p.y), .6);// moise to be zero at cursor
        cursor_horizontal_noise *= pow(dot(_uv.y, _uv.y), .3);// moise to be zero at bottom
        _p.x += cursor_horizontal_noise;

        // vertical line through the cursor point (_p.x)
        float left = smoothstep(-_w, 0., _p.x);
        float right = 1. - smoothstep(0., _w, _p.x);
        float stem_shape = left * right;

        // make it grow + don't go up to the cursor point
        float grow_time = 1. - smoothstep(0., .2, u_stop_time);
        float stem_top_mask = smoothstep(0., pow(grow_time, .5), .03 -_p.y);
        stem_shape *= stem_top_mask;

        // stop drawing once done
        stem_shape *= (1. - step(.17, u_stop_time));

        return stem_shape;
    }

    void main() {

        vec3 base = texture2D(u_texture, vUv).xyz;

        vec2 uv = vUv;
        uv.x *= u_ratio;
        vec2 cursor = vUv - u_cursor.xy;
        cursor.x *= u_ratio;
        
        vec3 stem_color = vec3(.1 + u_stop_randomizer[0] * .6, .6, .2);
        vec3 flower_color = vec3(.6 + .5 * u_stop_randomizer[1], .1, .9 - .5 * u_stop_randomizer[1]);

        float angle = .5 * (u_stop_randomizer[0] - .5);

        float stem_shape = get_stem_shape(cursor, uv, .003, angle);
        stem_shape += get_stem_shape(cursor + vec2(0., .2 + .5 * u_stop_randomizer[0]), uv, .003, angle);
        float stem_mask = 1. - get_stem_shape(cursor, uv, .004, angle);
        stem_mask -= get_stem_shape(cursor + vec2(0., .2 + .5 * u_stop_randomizer[0]), uv, .004, angle);

        float petals_back_number = 1. + floor(u_stop_randomizer[0] * 2.);
        float angle_offset = -(2. * step(0., angle) - 1.) * .1 * u_stop_time;
        float flower_back_shape = get_flower_shape(cursor, petals_back_number, angle + angle_offset, 1.5);
        float flower_back_mask = 1. - get_flower_shape(cursor, petals_back_number, angle + angle_offset, 1.6);

        float petals_front_number = 2. + floor(u_stop_randomizer[1] * 2.);
        float flower_front_shape = get_flower_shape(cursor, petals_front_number, angle, 1.);
        float flower_front_mask = 1. - get_flower_shape(cursor, petals_front_number, angle, .95);

        vec3 color = base;
        color *= stem_mask;
        color *= flower_back_mask;
        color *= flower_front_mask;

        color += (stem_shape * stem_color);

        color += (flower_back_shape * (flower_color + vec3(0., .8 * u_stop_time, 0.)));
        color += (flower_front_shape * flower_color);

        color.r *= 1. - (.5 * flower_back_shape * flower_front_shape);
        color.b *= 1. - (flower_back_shape * flower_front_shape);


        color *= u_clean;

        gl_FragColor = vec4(color, 1.);
    }

</script>

<script type="x-shader/x-vertex" id="vertexShader">
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1.);
    }
</script>

<script type="module">
import * as THREE from "https://cdn.skypack.dev/three@0.133.1/build/three.module";

const canvasEl = document.querySelector("#webgl-canvas");
const cleanBtn = document.querySelector(".webgl-clean-btn");
const container = document.querySelector(".webgl-container");

const pointer = {
    x: .5,
    y: .5,
    clicked: false,
};

let basicMaterial, shaderMaterial;
let renderer = new THREE.WebGLRenderer({
    canvas: canvasEl,
    alpha: true,
});
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
let sceneShader = new THREE.Scene();
let sceneBasic = new THREE.Scene();
let camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 10);
let clock = new THREE.Clock();

let renderTargets = [
    new THREE.WebGLRenderTarget(container.clientWidth, container.clientHeight),
    new THREE.WebGLRenderTarget(container.clientWidth, container.clientHeight)
];

createPlane();
updateSize();

window.addEventListener("resize", () => {
    updateSize();
});

render();

let isTouchScreen = false;

container.addEventListener("click", e => {
    if (!isTouchScreen) {
        const rect = container.getBoundingClientRect();
        pointer.x = (e.clientX - rect.left) / container.clientWidth;
        pointer.y = (e.clientY - rect.top) / container.clientHeight;
        pointer.clicked = true;		
    }
});

container.addEventListener("touchstart", e => {
    isTouchScreen = true;
    const rect = container.getBoundingClientRect();
    pointer.x = (e.targetTouches[0].clientX - rect.left) / container.clientWidth;
    pointer.y = (e.targetTouches[0].clientY - rect.top) / container.clientHeight;
    pointer.clicked = true;
});

cleanBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    cleanCanvas();
});

function cleanCanvas() {
    pointer.vanishCanvas = true;
    setTimeout(() => {
        pointer.vanishCanvas = false;
    }, 50);
}

function createPlane() {
    shaderMaterial = new THREE.ShaderMaterial({
        uniforms: {
            u_stop_time: {type: "f", value: 0.},
            u_stop_randomizer: {type: "v2", value: new THREE.Vector2(Math.random(), Math.random())},
            u_cursor: {type: "v2", value: new THREE.Vector2(pointer.x, pointer.y)},
            u_ratio: {type: "f", value: container.clientWidth / container.clientHeight},
            u_texture: {type: "t", value: null},
            u_clean: {type: "f", value: 1.},
        },
        vertexShader: document.getElementById("vertexShader").textContent,
        fragmentShader: document.getElementById("fragmentShader").textContent
    });
    basicMaterial = new THREE.MeshBasicMaterial();
    const planeGeometry = new THREE.PlaneGeometry(2, 2);
    const planeBasic = new THREE.Mesh(planeGeometry, basicMaterial);
    const planeShader = new THREE.Mesh(planeGeometry, shaderMaterial);
    sceneBasic.add(planeBasic);
    sceneShader.add(planeShader);
}

function render() {

    shaderMaterial.uniforms.u_clean.value = pointer.vanishCanvas ? 0 : 1;
    shaderMaterial.uniforms.u_texture.value = renderTargets[0].texture;

    if (pointer.clicked) {
        shaderMaterial.uniforms.u_cursor.value = new THREE.Vector2(pointer.x, 1 - pointer.y);
        shaderMaterial.uniforms.u_stop_randomizer.value = new THREE.Vector2(Math.random(), Math.random());
        shaderMaterial.uniforms.u_stop_time.value = 0.;
        pointer.clicked = false;
    }
    shaderMaterial.uniforms.u_stop_time.value += clock.getDelta();


    renderer.setRenderTarget(renderTargets[1]);
    renderer.render(sceneShader, camera);
    basicMaterial.map = renderTargets[1].texture;
    renderer.setRenderTarget(null);
    renderer.render(sceneBasic, camera);

    let tmp = renderTargets[0];
    renderTargets[0] = renderTargets[1];
    renderTargets[1] = tmp;

    requestAnimationFrame(render);
}

function updateSize() {
    shaderMaterial.uniforms.u_ratio.value = container.clientWidth / container.clientHeight;
    renderer.setSize(container.clientWidth, container.clientHeight);
}
</script>

<script>
// Liquid Effect Ripple Animation
const liquidContainer = document.getElementById('liquidContainer');

liquidContainer.addEventListener('mouseenter', function(e) {
    createRipple(e);
});

liquidContainer.addEventListener('mousemove', function(e) {
    if (Math.random() > 0.7) { // Create occasional ripples on mouse move
        createRipple(e);
    }
});

liquidContainer.addEventListener('click', function(e) {
    createRipple(e);
});

function createRipple(e) {
    const ripple = document.createElement('div');
    ripple.classList.add('ripple');
    
    const rect = liquidContainer.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    ripple.style.left = x + 'px';
    ripple.style.top = y + 'px';
    ripple.style.width = '100px';
    ripple.style.height = '100px';
    
    liquidContainer.appendChild(ripple);
    
    // Remove ripple after animation
    setTimeout(() => {
        ripple.remove();
    }, 1000);
}
</script>

</body>
</html>

